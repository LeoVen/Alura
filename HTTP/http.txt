/* 
 *
 * AnotaÃ§Ãµes do curso HTTP
 *
*/

HTTP, HTTPS e HTTP2

< < < HTTP - Hypertext Transfer Protocol

        â•”â•â•â•â•â•â•â•â•â•—                  â•”â•â•â•â•â•â•â•â•â•—
        â•‘        â•‘    Protocols     â•‘        â•‘  SQL   â–ˆâ–€â–€â–€â–€â–ˆ
        â•‘ Client â•‘ <--------------> â•‘ Server â•‘ <----> â–ˆâ–„â–„â–„â–„â–ˆ
        â•‘        â•‘                  â•‘        â•‘        â–ˆâ–„â–„â–„â–„â–ˆ
        â•šâ•â•â•â•â•â•â•â•â•                  â•šâ•â•â•â•â•â•â•â•â•       Database
User's PCs or other servers

Assim como outros protocolos:
FTP, SMTP, SMB

O HTTP envia texto puro via interntet (TCP).
Por questÃµes de seguranÃ§a existe o HTTPS (Safe) que envia essas informaÃ§Ãµes criptografadas.
A criptografia se da por meio de SSL/TSL (Secure Sockets Layer & Transport Layer Security).
O SSL Ã© o predecessor do TSL.

Identidade : Certificado Digital
	Ã‰ certificado por uma entidade confiÃ¡vel que o site estÃ¡ enviando informaÃ§Ãµes criptografadas.

< < < Tipos de Criptografia

< < AssimÃ©trica :
	- Diferentes Chaves
	- Mais seguro
	- Mais lento

< < SimÃ©trica :
	- Mesmas chaves
	- Mais rÃ¡pida
	- Menos seguro


        â•”â•â•â•â•â•â•â•â•â•—                  â•”â•â•â•â•â•â•â•â•â•—
        â•‘        â•‘       HTTPS      â•‘        â•‘
        â•‘ Client â•‘ <--------------> â•‘ Server â•‘
        â•‘        â•‘                  â•‘        â•‘
        â•šâ•â•â•â•â•â•â•â•â•                  â•šâ•â•â•â•â•â•â•â•â•
      Chave pÃºblica               Chave Privada
           ğŸ”‘ ------------------------ ğŸ”‘
   Criptografa os dados        Ã‰ a Ãºnica que consegue
    saindo da mÃ¡quina       descriptografar a menssagem

O HTTPS usa os dois mÃ©todos

< < < DNS : Domain Name System

             â•”â•â•â•â•â•â•â•â•â•—                  â•”â•â•â•â•â•â•â•â•â•—
             â•‘        â•‘  172.217.29.131  â•‘        â•‘
             â•‘ Client â•‘ ---------------> â•‘ Server â•‘
             â•‘        â•‘                  â•‘        â•‘
             â•šâ•â•â•â•â•â•â•â•â•                  â•šâ•â•â•â•â•â•â•â•â•
                â”‚  â”‚receives            Google Server
           sendsâ”‚  â”‚172.217.29.131
   google.com.brâ”‚  â”‚
           â•”â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘ DNS Server â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•

www.mail.google.com.br
Top level domain:
	- br
Subdomains:
	- com (comercial)
	- google
	- mail
	- www (legacy)

www pode ser omitido

< < < Portas

Portas padrÃµes:
	- HTTP: 80
	- HTTPS: 443
	- FTP: 20
	- SSH: 22

< < < URL: Uniform Resource Locator

PadrÃ£o:

protocolo://subdomÃ­nio.domÃ­nio:porta/caminho/recurso

https://www.youtube.com:443/feed/subscriptions

HTTP Ã© Stateless. Ou seja, nÃ£o guarda o estado dos pedidos anteriores.
Cada pedido Ã© individual e completo por si sÃ³.

â•”â•â•â•â•â•â•â•â•â•—   HTTP Request   â•”â•â•â•â•â•â•â•â•â•—
â•‘        â•‘ ---------------> â•‘        â•‘
â•‘ Client â•‘                  â•‘ Server â•‘
â•‘        â•‘ <--------------- â•‘        â•‘
â•šâ•â•â•â•â•â•â•â•â•   HTTP Response  â•šâ•â•â•â•â•â•â•â•â•

HTTP Status Codes :

100 - Info
200 - Success
300 - Redirecionamento
400 - Erro do lado client
500 - Erro do lado server

Voltando para  URLs...

https://www.youtube.com/results?search-query=bolinhos

O ? na URL significa uma query e em seguida seus parÃ¢metros.
Neste caso:

search-query = bolinhos

Quando temos mais de um parÃ¢metro, estes sÃ£o separados por & :

https://www.youtube.com/results?q=bolinhos&sp=CAE%253

q = bolinhos
sp = CAE%253



AtÃ© agora vimos o mÃ©todo GET.

O mÃ©todo POST :
  - Envio de resultados
  - NÃ£o aparecem na URL
  - Casos de formulÃ¡rios onde as informaÃ§Ãµes precisam ser protegidas

Mas e GET?
A vantagem de GET Ã© que tendo a URL Ã© possÃ­vel realizar o mesmo processo por outras
pessoas que possuam a mesma URL. Por exemplo fizemos uma busca no google e queremos
que outras pessoas vejam os mesmos resultados que nÃ³s.

GET: Receber dados      DELETE: Remover um recurso
POST: Enviar dados      PUT: Atualizar um recurso
Outros:
HEAD,  OPTIONS, CONNECT, etc

WebServices

ComunicaÃ§Ã£o por XML ou JSON. Ao fazer GET dessas informaÃ§Ãµes tudo passarÃ¡ por um parsing que
pegarÃ¡ as informaÃ§Ãµes relevantes de acordo com uma especificaÃ§Ã£o (WSDL ou WADL).

Via cabeÃ§alho HTTP especificamos como queremos receber as informaÃ§Ãµes (XML ou JSON).
Accept: text/html
Accept: text/css .. Accept: */*

Arquitetura REST

                       Recurso
                        (URI)
                          ^
                         / \
                        /   \
                       /     \
                      /       \
                     /         \
                    /___________\
                   / \   / \   / \
                  /   \ /___\ /   \
                 /     \     /     \
                /       \   /       \
               /         \ /         \
   OperaÃ§Ãµes  /___________v___________\  RepresentaÃ§Ã£o
 (GET, POST, PUT...)                  (JSON, XML, HTML...)

No cabeÃ§alho: tipo/subtipo

Tipos: text/image/application/audio/video
       text: text/plain, text/css, text/html, text/javascript ...
       image: image/gif, image/png, image/jpeg ...
       audio:
SÃ£o chamados de MIME Type (Multipurpose Internet Mail Extensions)


        HTTP2

HTTP2: NÃ£o envia mais texto puro. As informaÃ§Ãµes sÃ£o enviadas de forma binÃ¡ria.
       Por padrÃ£o os dados sÃ£o criptografados (TLS).
GZIP: Algoritmo de zipar o conteÃºdo enviado. Diminui a quantidade de bytes trafegando.
HPACK: CompressÃ£o dos dados do cabeÃ§alho.

        BinÃ¡rio > Zipar > Criptografar

No HTTP2 nÃ£o Ã© mais preciso enviar os mesmos headers quando eles sÃ£o os mesmos em diferentes
solicitaÃ§Ãµes. Isso se chama Headers Stateful.

Server Push :

                           â•”â•â•â•â•â•â•â•â•â•—   HTTP Request   â•”â•â•â•â•â•â•â•â•â•—
                           â•‘        â•‘ ---------------> â•‘        â•‘
                           â•‘ Client â•‘                  â•‘ Server â•‘
                           â•‘        â•‘ <--------------- â•‘        â•‘
                           â•šâ•â•â•â•â•â•â•â•â•   HTTP Response  â•šâ•â•â•â•â•â•â•â•â•
                               |                           |            HTTTP 1.1
                    index.html | ------------------------> | _
                               |                           |  | HÃ¡ uma certa demora
                               |                           |  |
                               | <------------------------ | _|
                               |                           |
           prÃ³ximoRecurso.html | ------------------------> | _
                               |                           |  | Cada recurso Ã© enviadoo um por um
                               | <------------------------ | _|
                               |                           |
                               |                           |            HTTP 2
                               |                           |
                               |                           |      JÃ¡ com Server Push Ã© diferente.
                    estilo.css | ------------------------> |      Os recursos sÃ£o enviados e
                     jquery.js | ------------------------> |      recebidos a todo momento.
                               | ------------------------> |
                               | <------jquery.js--------- |
                       main.js | ------------------------> |      Assim que index.html Ã© carregado
                               | <------estilo.css-------- |      Ã© enviado um request a todos seus
                      logo.png | ------------------------> |      recursos com antecedÃªncia, 
                               | <------logo.png---------- |      agilizando o processo e deixando
                   imagem.jpeg | ------------------------> |      de fazer um requeste a cada
                               | <------main.js----------- |      recurso.
                               |                           |
                               |                           |


Multiplexing : RequisiÃ§Ãµes e respostas sÃ£o paralelas.

Keep ALive: Com a mesma conexÃ£o TCP Ã© possÃ­vel enviar vÃ¡rias requisiÃ§Ãµes HTTP em paralelo (HTTP2).

TCP (Transmission Control Protocol) :

           â•”â•â•â•â•â•â•â•¦â•â•â•â•â•â•¦â•â•â•â•â•â•â•¦â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•—
           â•‘ HTTP â•‘ FTP â•‘ SMTP â•‘ SMB â•‘ etc ... â•‘ - Protocolos
           â• â•â•â•â•â•â•â•©â•â•â•â•â•â•©â•â•â•â•â•â•â•©â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•£
           â•‘                 TCP               â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
